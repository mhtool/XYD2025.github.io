好的，没有问题。以下是这道题目中核心的状态转移与计算的几个关键数学公式。

假设：
*   $i$ 表示当前是第 $i$ 轮操作（$i$ 从 1 到 $2n$）。
*   $S_i$ 表示在第 $i$ 轮开始时，所有已解锁卡牌的数值总和。
*   $C_i$ 表示在第 $i$ 轮开始时，已解锁卡牌的数量。
*   $E_i$ 表示在第 $i$ 轮操作中，获得的期望分数。
*   $A_i$ 表示到第 $i$ 轮结束时，累积的总期望分数。

---

1.  **单轮期望分数 (Per-Round Expectation)**

    每一轮操作的期望分数，等于该轮开始时所有已解锁卡牌的总分值，除以已解锁卡牌的总数量。

    $$
    E_i = \frac{S_i}{C_i}
    $$

2.  **总期望分数累加 (Total Expectation Accumulation)**

    总的期望分数是每一轮期望分数的总和。可以用一个简单的递推公式表示，即第 $i$ 轮结束后的总期望，等于第 $i-1$ 轮的总期望加上第 $i$ 轮的期望分数。

    $$
    A_i = A_{i-1} + E_i \quad (\text{其中 } A_0 = 0)
    $$

3.  **状态转移：卡牌总和与数量 (State Transition for Sum and Count)**

    每完成一轮操作，只要尚未解锁全部卡牌，就会有一张新的卡牌被解锁。这会改变下一轮的卡牌总和与数量。

    $$
    C_{i+1} = \min(C_i + 1, 2n)
    $$
    $$
    S_{i+1} = S_i + a_{C_i+1} \quad (\text{仅在 } C_i < 2n \text{ 时发生})
    $$

    其中，$a_{k}$ 代表牌堆中第 $k$ 张牌的数值。这个公式表明，如果还有未解锁的牌（$C_i < 2n$），那么下一轮的卡牌数量会加一，总和会加上新解锁的那张牌（即第 $C_i+1$ 张牌）的数值。